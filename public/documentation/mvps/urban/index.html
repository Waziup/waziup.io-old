<!DOCTYPE html>




 <html class="no-js" lang=""> 
<head>
<script type="text/javascript">
theBaseUrl = "http://" + location.host + "/";
document.write('<base href="' + theBaseUrl + '"/>');
</script>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
  <title>Gestion des déchets urbains - WAZIUP Platform</title>
  <meta name="generator" content="Hugo 0.18.1" />

  
  <link rel="canonical" href="./documentation/mvps/urban">
  
  <meta name="author" content="waziup.io">
  

  <meta property="og:url" content="/documentation/mvps/urban">
  <meta property="og:title" content="WAZIUP Platform">
  <meta property="og:image" content="/images/logo-waziup.png">
  <meta name="apple-mobile-web-app-title" content="WAZIUP Platform">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="shortcut icon" type="image/x-icon" href="./images/logo-waziup.png">
  <link rel="icon" type="image/x-icon" href="./images/logo-waziup.png">


  <style>
    @font-face {
      font-family: 'Icon';
      format('embedded-opentype'),
      format('woff'),
      format('truetype'),
      format('svg');
      font-weight: normal;
      font-style: normal;
    }
  </style>

  <link rel="stylesheet" href="css/style.css">

  <script src="js/vendor.js"></script>

  <script src="js/app.js"></script>

</head>
<body class="palette-primary-pink palette-accent-pink">


<div class="single-page">
  <nav aria-label="Header" id="header" class="top-menu">
  <div class="left">
    <a href="#">
      <div id="logo" class="logo"></div>
    </a>
  </div>

  <div class="center">
          <a href="./" ><img src="img/lang/gb.png" alt="English"></a>
          <a href="./fr" ><img src="img/lang/fr.png" alt="Français"></a>
  </div>

  <div class="right">
    <div class="top-menu-items" id="top-menu-items">

    </div>

    <div class="download">
      <a href="http://dashboard.waziup.io" class="button button--red">
        Try Waziup
      </a>
    </div>
    
    <a href="https://github.com/Waziup/platform" target="_blank" class="github-logo">
      <i class="fa fa-2x fa-github" aria-hidden="true"></i>
    </a>

    <div class="search-button">
      <i class="fa fa-lg fa-search"></i>
    </div>

  </div>
</nav>

<ul id="mobile-menu" style="display: none">
</ul>

<div id="search">
  <div class="search-bar">
    <div class="search-bar__back">
      <i class="fa fa-lg fa-times"></i>
    </div>
    <input class="search-bar__input" placeholder='Type your search here...'>
  </div>
  <div class="search-results">
    <ul></ul>
  </div>
</div>


</div>

<div class="page documentation">
    <div class="menu" id="side-menu">
    </div>
    <div class="content">
      <h1 class="content-header">Gestion des déchets urbains </h1>
      <div class="markdowned">
        

<p>Discover here how to prototype an application for waste management using Waziup.
<strong>Under construction.</strong>
The goal of this MVP prototype is to provide an overwiew and quick start on how to develop an IoT device for environmental friendly urban waste manamegement. The device is enabling of periodic reading about fill level information for waste bins equipped with a hard top. This is done via ultrasonic distance measurment of the fill level and radio communication of this value via license free LoRa devices to a monitor station.</p>

<p>Below you find some impressions, a scenario description and some hints how to start developing the electronic and software part of the solution.</p>

<h2 id="local-african-waste-soft-bin">Local African waste soft bin</h2>

<p><img src="./documentation/mvps/waste_images/waste_bin.jpg" alt="bin" /></p>

<p>Waste Bin</p>

<p><img src="./documentation/mvps/waste_images/waste_bin_elec.jpg" alt="bin elec" /></p>

<p>Electronic circuit of early experiments running locally.</p>

<h1 id="development">Development</h1>

<h2 id="development-electronics-overview">Development - electronics overview</h2>

<p><img src="./documentation/mvps/waste_images/20170208_163157_resized.jpg" alt="elec" /></p>

<p>Electronic compoonents for the Urban Waste Management MVP after testing several options and final evaluation: Temperature compensated distance sensor US-100 (Voltage 2.4 - 5.5V), Arduino Pro Mini 3.3V (8MHz) version, energy source (2 or 3 battery type AA), (Radio module &ndash; not visible).</p>

<p><img src="./documentation/mvps/waste_images/20170209_115554_resized.jpg" alt="bin top" /></p>

<p>Top view of the waste bin electronics mounted on a waste bin holder.</p>

<p><img src="./documentation/mvps/waste_images/20170209_115600_resized.jpg" alt="bin top detail" /></p>

<p>Detailed top view of electronics mounted for waste bin fill level experiments.</p>

<h2 id="development-hardware-list">Development - hardware list</h2>

<ul>
<li><a href="https://www.sparkfun.com/products/11114">Arduino Pro Mini 3.3V</a></li>
<li><a href="http://modtronix.com/inair9.html">InAir9 LoRa module</a></li>
<li><a href="https://www.bananarobotics.com/shop/US-100-Ultrasonic-Distance-Sensor-Module">Distance and Temperature Sensor</a></li>
<li><a href="common local shop">Battery AA</a>
<br /></li>
</ul>

<h2 id="development-hardware-description">Development - hardware description</h2>

<h2 id="arduino">Arduino</h2>

<p>The Arduino Pro Mini 3.3V (8MHz) board with his 328P microcrontroller is the &ldquo;heart&rdquo; of the electronic assembly. It contains the central steering loop: it reads sensor information via a serial connection and sends it
via the LoRa module. In the following it is shown how to connect the sensor to the Arduino, afterwards it will be shown how to program it. <img src="./images/mvps/water_farming/arduino.JPG" alt="Arduino" /></p>

<h2 id="lora-module">LoRa module</h2>

<p>The LoRa chip used here is the inAir9 module.</p>

<p><img src="./images/mvps/water_farming/inAir9.jpg" alt="InAir9 and wires" /></p>

<p>Below the wire table of the InAir9 module is shown how to connect it to the arduino.</p>

<p><img src="./images/mvps/water_farming/inAir9_table.jpg" alt="InAir9 and wires" /></p>

<h2 id="ultrasonic-distance-sensor-us-100">Ultrasonic distance sensor US-100</h2>

<p>Using US-100 in Serial Data Mode provides high accuracy and low computational power to the arduino main board:</p>

<p>Select the operating mode of the US-100 Ultrasonic Distance Sensor by using the jumper on the back of the module. When the jumper is present (choose serial data mode), the sensor outputs the distance as binary serial data. UART mode serial interface configuration 9600 baud rate, starting a one, and stop bits a, data bits, eight, and white parity checking, no flow control.</p>

<p>Attach the module to a serial port on your microcontroller. The Trig/TX pin connects to your microcontroller&rsquo;s TX serial transmit line. The Echo/RX pin connects to your microcontroller&rsquo;s RX serial receive line. Set the microcontroller&rsquo;s serial port to use 9600 baud at 8-N-1 (eight data bits, no parity, one stop bit).</p>

<p>To start measuring the distance, output a 0x55 over the serial port and read back the two byte distance in high byte, low byte format. The distance returned is measured in millimeters. Use the following formula to obtain the distance as millimeters:</p>

<pre><code>Millimeters = FirstByteRead * 256 + SecondByteRead
</code></pre>

<p>This module can also output the temperature when using serial output mode. To read the temperature, output a 0x50 byte over the serial port and read back a single temperature byte. The actual temperature is obtained by using the following formula:</p>

<pre><code>Celsius = ByteRead - 45
</code></pre>

<h2 id="development-hardware-connection">Development - hardware connection</h2>

<h1 id="software">Software</h1>

<h2 id="program-the-arduino">Program the Arduino</h2>

<p>Arduino cna be programmed by sending a set of instructions to the microcrontroller on the board.
To realize that the IDE Arduino Software which uses a simplified version of C++ is applied. The Arduino software can be download <a href="https://www.arduino.cc/en/main/software">here</a>.
Then to connect the Arduino Pro Mini to the computer an USB-FTDI chip as below was aused.</p>

<p><img src="./images/mvps/water_farming/ftdi_arduino.png" alt="FTDI Arduino" /></p>

<h2 id="libraries">Libraries</h2>

<ul>
<li><a href="https://www.arduino.cc/en/Reference/SoftwareSerial">SoftwareSerial library</a> is used with the distance sensor US-100 via serial communication</li>
<li><a href="https://github.com/CongducPham/LowCostLoRaGw">SX1272 library</a> is used with LoRa module</li>
</ul>

<h3 id="lora-module-1">LoRa module</h3>

<p>To send the measured fill level data via the LoRa radio the SX1272 library is used. Examples to use this library  can be found <a href="https://github.com/CongducPham/LowCostLoRaGw/tree/master/Arduino">here</a>.</p>

<h3 id="distance-sensor-module">Distance sensor module</h3>

<p>To get the distance (and inherently temperature) measure from the US-100 sensor the SoftwareSerial library is used to run it in the serial (more accurate than the PWM) mode.
Here is a sample code used:</p>

<pre><code>// Test of distance and temperature for sensor module US-100
// using 3,3 V  Arduino Pro Mini powering US-100 via Arduino GPIO
// adapted from Zeisberg, Jan 2017
// Original from RafaG, 2014

#include &lt;SoftwareSerial.h&gt;;

const int US100_TX = 6;
const int US100_RX = 5;

// instntiation of a new serial channel
SoftwareSerial portUS100(US100_RX, US100_TX);

unsigned int MSByteDist = 0;
unsigned int LSByteDist = 0;
unsigned int mmDist = 0;
int temp = 0;

void setup() {
    // provide VCC to US100 via GPIO 4 to enable later energy saving function 
    pinMode(4, OUTPUT);
    digitalWrite(4, HIGH);

Serial.begin(9600);
portUS100.begin(9600);

}

void loop() {

portUS100.flush(); // limpia el buffer del puerto serie
portUS100.write(0x55); // orden de medición de distancia

delay(500);

if(portUS100.available() &gt;= 2) // comprueba la recepción de 2 bytes
{
    MSByteDist = portUS100.read(); // lectura de ambos bytes
    LSByteDist  = portUS100.read();
    mmDist  = MSByteDist * 256 + LSByteDist; // distancia
    if((mmDist &gt; 1) &amp;&amp; (mmDist &lt; 10000)) // comprobación de la distancia dentro de rango
    {
        Serial.print(&quot;Distance: &quot;);
        Serial.print(mmDist, DEC);
        Serial.println(&quot; mm&quot;);
    }
}

portUS100.flush(); // limpia el buffer del puerto serie
portUS100.write(0x50); // orden de medición de distancia

delay(500);
if(portUS100.available() &gt;= 1) // comprueba la recepción de 1 byte
{
    temp = portUS100.read(); // lectura del byte
    if((temp &gt; 1) &amp;&amp; (temp &lt; 130)) // comprobación de rango válido
    {
        temp -= 45; // corrige offset de 45º
        Serial.print(&quot;Temperature: &quot;);
        Serial.print(temp, DEC);
        Serial.println(&quot; Grad Celsius.&quot;);
    }
}

delay(1000);
}
</code></pre>

<h2 id="test-scenario-eu-soft-waste-bin">Test scenario EU soft waste bin</h2>

<p><img src="./documentation/mvps/waste_images/20170209_115618_resized.jpg" alt="bin front view" />
Front side view of MVP urban waste management experimental setup with soft bin and hard top.</p>

<p><img src="./documentation/mvps/waste_images/20170209_115629_resized.jpg" alt="bin inside top" />
Inside top view from down - showing sensor looking downwards to estimate the distance from top to the surface of the waste.</p>

<p><img src="./documentation/mvps/waste_images/20170209_115643_resized.jpg" alt="bin almost empty" />
Almost empty German waste bin inside - downside looking view.</p>

<p><img src="./documentation/mvps/waste_images/20170209_115720_resized.jpg" alt="bin comp-62cm" /></p>

<p>Distance measured 62cm for comparison for almost empty trash bin.</p>

<p><img src="./documentation/mvps/waste_images/20170209_115752_resized.jpg" alt="bin meas-65cm" /></p>

<p>Distance measured 65cm with ultrasonic sensor US-100 for almost empty trash bin.</p>

<p><img src="./documentation/mvps/waste_images/20170209_115856_resized.jpg" alt="bin comp-44cm" /></p>

<p>Distance measured 44cm for comparison for <sup>1</sup>&frasl;<sub>3</sub> filled trash bin.</p>

<p><img src="./documentation/mvps/waste_images/20170209_115912_resized.jpg" alt="bin meas-44cm" /></p>

<p>Distance measured 44cm with ultrasonic sensor US-100 for <sup>1</sup>&frasl;<sub>3</sub> filled trash bin.</p>

      </div>
    </div>
</div>

<div class="lander-row lander-row--blue footer">
  <div class="container">
    <div class="row">
      <div class="col col-3">
        <h2 class="h2">Learn More</h2>
        <a href='./why-use-waziup/'>
          <p class="text">Why use Waziup?</p>
        </a>
        <a href='./documentation/how-waziup-works/'>
          <p class="text">Documentation</p>
        </a>
        <a href='./about'>
          <p class="text">About us</p>
        </a>
        <a href='./resources/news/'>
          <p class="text">News</p>
        </a>
        <a href='./contact'>
          <p class="text">Contact</p>
        </a>
      </div>
        <div class="col col-6">
        <h2 class="h2">All things code</h2>
          <a href='./support'>
            <p class="text">Support</p>
          </a>
          <a href='./resources/community'>
            <p class="text">Community</p>
          </a>
          <a href="https://github.com/waziup/platform" target="_blank">
            <p class="text">GitHub</p>
          </a>
      </div>
      <div class="col col-6">
        <h2 class="h2">Stay up to date</h2>
        <p class="text">
          Leave your email for the latest news: We won’t spam you and won’t go off topic.
        </p>

        

        <div class="social-buttons">
          <p class="text">Follow us on</p>
          <a href="https://twitter.com/waziupIOT" target="_blank">
            <i class="fa fa-2x fa-twitter"></i>
          </a>

          <a href="https://www.linkedin.com/company/magnetic-io" target="_blank">
            <i class="fa fa-2x fa-linkedin"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="footer-bottom lander-row--blue">
  <div class="container">
    <div class="part">
      <a href='./about'><img class="waziup-logo" src="./img/005-waziup/Logo/logo-waziup-white.svg" alt=""></a>
    </div>

    <div class="part">
      <a href="./" class="button button--red" style="text-decoration:none">
        English
      </a>
    </div>

    <div class="part">
      <p class="text">Code licensed under<a type="application/rss+xml" href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache 2</a> © 2016 <a href='./about'>Waziup.io</a></p>
    </div>
  </div>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59948816-1', 'auto');
  ga('send', 'pageview');

</script>

